<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>App Icon Resizer for Unity</title>
    <!-- JSZip ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ (í•„ìˆ˜) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <!-- FileSaver ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        body { background: #1e1e1e; color: #f0f0f0; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 30px; }
        .box { background: #2c2c2c; padding: 30px; border-radius: 12px; width: 100%; max-width: 500px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        h1 { margin-top: 0; }
        button { background: #0a84ff; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1rem; cursor: pointer; margin-top: 20px; width: 100%; font-weight: bold; }
        button:hover { background: #005bb5; }
        button:disabled { background: #555; cursor: not-allowed; }
        input { margin: 20px 0; }
        #status { margin-top: 15px; font-size: 0.9rem; color: #aaa; min-height: 20px;}
    </style>
</head>
<body>
    <div class="box">
        <h1>ğŸ“± ì•± ì•„ì´ì½˜ ìƒì„±ê¸°</h1>
        <p>1024x1024 ì´ë¯¸ì§€ë¥¼ ì˜¬ë¦¬ë©´ iOS/Android í•„ìˆ˜ ì‚¬ì´ì¦ˆë¡œ ë³€í™˜í•˜ì—¬ ZIPìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.</p>
        
        <input type="file" id="fileInput" accept="image/*">
        <br>
        <img id="preview" style="max-width: 150px; border-radius: 20px; display: none;">
        
        <button id="generateBtn" onclick="generateIcons()" disabled>ì•„ì´ì½˜ ìƒì„± ë° ë‹¤ìš´ë¡œë“œ</button>
        <div id="status"></div>
    </div>

    <script>
        const sizes = [
            // iOS
            20, 29, 40, 58, 60, 76, 80, 87, 120, 152, 167, 180, 1024,
            // Android (Adaptive & Legacy)
            36, 48, 72, 96, 144, 192, 512
        ];

        let sourceImg = null;
        const fileInput = document.getElementById('fileInput');
        const generateBtn = document.getElementById('generateBtn');
        const status = document.getElementById('status');

        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if(!file) return;

            const reader = new FileReader();
            reader.onload = function(event) {
                sourceImg = new Image();
                sourceImg.onload = function() {
                    document.getElementById('preview').src = sourceImg.src;
                    document.getElementById('preview').style.display = 'inline-block';
                    generateBtn.disabled = false;
                    status.innerText = `ì´ë¯¸ì§€ ë¡œë“œë¨: ${sourceImg.width}x${sourceImg.height}`;
                };
                sourceImg.src = event.target.result;
            };
            reader.readAsDataURL(file);
        });

        async function generateIcons() {
            if(!sourceImg) return;
            status.innerText = "ìƒì„± ì¤‘... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.";
            generateBtn.disabled = true;

            const zip = new JSZip();
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            // iOS í´ë”
            const iosFolder = zip.folder("iOS");
            const androidFolder = zip.folder("Android");

            for(let size of sizes) {
                canvas.width = size;
                canvas.height = size;
                
                // ë¦¬ì‚¬ì´ì§• í’ˆì§ˆì„ ìœ„í•´
                ctx.clearRect(0, 0, size, size);
                ctx.drawImage(sourceImg, 0, 0, size, size);

                const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
                
                if ([20, 29, 40, 58, 60, 76, 80, 87, 120, 152, 167, 180, 1024].includes(size)) {
                    iosFolder.file(`icon_${size}.png`, blob);
                }
                if ([36, 48, 72, 96, 144, 192, 512].includes(size)) {
                    androidFolder.file(`ic_launcher_${size}.png`, blob);
                }
            }

            status.innerText = "ì••ì¶• ì¤‘...";
            zip.generateAsync({type:"blob"}).then(function(content) {
                saveAs(content, "AppIcons.zip");
                status.innerText = "âœ… ë‹¤ìš´ë¡œë“œ ì™„ë£Œ!";
                generateBtn.disabled = false;
            });
        }
    </script>
</body>
</html>